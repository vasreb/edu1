{"version":3,"sources":["actions/loginRequest.js","components/Login/Login.jsx"],"names":["loginRequest","state","email","password","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","dispatch","res","wrap","_context","prev","next","type","POST_LOGIN_ERROR","payload","abrupt","POST_LOGIN_REQUEST","axios","post","sent","data","status","POST_LOGIN_SUCCESS","Error","message","t0","stop","_x","apply","this","arguments","LoginWrapper","styled","div","_templateObject","LoginForm","form","_templateObject2","LoginError","_templateObject3","connect","_state$login","login","error","stateProps","dispatchProps","ownProps","objectSpread","handleSubmit","props","_useState","useState","_useState2","slicedToArray","setEmail","_useState3","_useState4","setPassword","isLogin","react_default","createElement","react_router","to","concat","id","onSubmit","e","preventDefault","className","name","onChange","target","value","isError","errorHandle"],"mappings":"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","file":"static/js/6.249a53eb.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nimport {\r\n\tPOST_LOGIN_REQUEST,\r\n\tPOST_LOGIN_SUCCESS,\r\n\tPOST_LOGIN_ERROR,\r\n} from './../constants/constants'\r\n\r\nconst loginRequest = state => {\r\n\tconst { email, password } = state\r\n\treturn async dispatch => {\r\n\t\t//sync validate\r\n\r\n\t\tif (!email) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: POST_LOGIN_ERROR,\r\n\t\t\t\tpayload: 'sync_email_undefined',\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\t\tif (!password) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: POST_LOGIN_ERROR,\r\n\t\t\t\tpayload: 'sync_password_undefined',\r\n\t\t\t})\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t//async\r\n\r\n\t\tdispatch({\r\n\t\t\ttype: POST_LOGIN_REQUEST,\r\n\t\t})\r\n\t\ttry {\r\n\t\t\tlet res = await axios.post(\r\n\t\t\t\t'https://mysterious-reef-29460.herokuapp.com/api/v1/validate',\r\n\t\t\t\t{\r\n\t\t\t\t\temail,\r\n\t\t\t\t\tpassword,\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t\tif (res.data.status === 'ok') {\r\n\t\t\t\tdispatch({\r\n\t\t\t\t\ttype: POST_LOGIN_SUCCESS,\r\n\t\t\t\t\tpayload: res.data.data,\r\n\t\t\t\t})\r\n\t\t\t} else throw new Error(res.data.message)\r\n\t\t} catch (err) {\r\n\t\t\tdispatch({\r\n\t\t\t\ttype: POST_LOGIN_ERROR,\r\n\t\t\t\tpayload: err.message,\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default loginRequest\r\n","import React from 'react'\r\nimport { useState } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport loginRequest from './../../actions/loginRequest'\r\nimport { Redirect } from 'react-router'\r\nimport styled from 'styled-components'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst LoginWrapper = styled.div`\r\n\tmargin: 200px auto;\r\n\tdisplay: inline-flex;\r\n\tflex-direction: column;\r\n\tpadding: 10px;\r\n\tbackground-color: #e8e9ea;\r\n\tbox-shadow: 0px 0px 22px -20px black;\r\n`\r\nconst LoginForm = styled.form`\r\n\tmargin: auto;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n`\r\nconst LoginError = styled.div`\r\n\tfont-family: Verdana, Geneva, Tahoma, sans-serif;\r\n\tfont-size: 15px;\r\n\tmargin: 5px 0px;\r\n`\r\nLogin.propTypes = {\r\n\tisError: PropTypes.shape({\r\n\t\terror: PropTypes.bool.isRequired,\r\n\t\tpayload: PropTypes.string,\r\n\t}),\r\n\tlogin: PropTypes.shape({\r\n\t\tisLogin: PropTypes.bool.isRequired,\r\n\t\tid: PropTypes.number,\r\n\t}),\r\n\thandleSubmit: PropTypes.func.isRequired,\r\n}\r\n\r\nfunction Login(props) {\r\n\tconst [email, setEmail] = useState(null)\r\n\tconst [password, setPassword] = useState(null)\r\n\r\n\tconst handleEmailChange = e => setEmail(e.target.value)\r\n\r\n\tconst handlePasswordChange = e => setPassword(e.target.value)\r\n\r\n\tconst errorHandle = error => {\r\n\t\tswitch (error.message) {\r\n\t\t\tcase 'sync_email_undefined':\r\n\t\t\t\treturn <LoginError>Enter email!</LoginError>\r\n\t\t\tcase 'sync_password_undefined':\r\n\t\t\t\treturn <LoginError>Enter password!</LoginError>\r\n\t\t\tcase 'wrong_email_or_password':\r\n\t\t\t\treturn <LoginError>Wrong email or password.</LoginError>\r\n\t\t\tdefault:\r\n\t\t\t\treturn <LoginError>Error: {error.message}</LoginError>\r\n\t\t}\r\n\t}\r\n\tconst { error, login } = props\r\n\tif (login.isLogin) {\r\n\t\treturn <Redirect to={`/profile/${login.id}`} />\r\n\t}\r\n\treturn (\r\n\t\t<LoginWrapper\r\n\t\t\tonSubmit={e => {\r\n\t\t\t\te.preventDefault()\r\n\t\t\t\tprops.handleSubmit({ email, password })\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<LoginForm className=\"login-form\">\r\n\t\t\t\t<label>\r\n\t\t\t\t\tEmail <br />\r\n\t\t\t\t\t<input name=\"email\" type=\"text\" onChange={handleEmailChange} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label>\r\n\t\t\t\t\tPassword <br />\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\tonChange={handlePasswordChange}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</label>\r\n\t\t\t\t<br />\r\n\t\t\t\t<button type=\"submit\">Sign in</button>\r\n\t\t\t</LoginForm>\r\n\t\t\t{error.isError ? errorHandle(error) : null}\r\n\t\t</LoginWrapper>\r\n\t)\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n\treturn {\r\n\t\tdispatch,\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n\tconst { error, login } = state.login\r\n\treturn {\r\n\t\tlogin,\r\n\t\terror,\r\n\t}\r\n}\r\n\r\nconst mergeProps = (stateProps, dispatchProps, ownProps) => {\r\n\tconst handleSubmit = state => {\r\n\t\tdispatchProps.dispatch(loginRequest(state))\r\n\t}\r\n\treturn {\r\n\t\t...stateProps,\r\n\t\t...ownProps,\r\n\t\thandleSubmit,\r\n\t}\r\n}\r\n\r\nexport default connect(\r\n\tmapStateToProps,\r\n\tmapDispatchToProps,\r\n\tmergeProps\r\n)(Login)\r\n"],"sourceRoot":""}